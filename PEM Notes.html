<meta http-equiv="Content-Type" content="text/html; charset=utf-8"><link type="text/css" rel="stylesheet" href="resources/sheet.css" >
<style type="text/css">.ritz .waffle a { color: inherit; }.ritz .waffle .s0{background-color:#ffffff;text-align:left;font-weight:bold;color:#000000;font-family:'Arial';font-size:10pt;vertical-align:bottom;white-space:nowrap;direction:ltr;padding:2px 3px 2px 3px;}.ritz .waffle .s1{background-color:#ffffff;text-align:left;color:#000000;font-family:'Arial';font-size:10pt;vertical-align:bottom;white-space:nowrap;direction:ltr;padding:2px 3px 2px 3px;}.ritz .waffle .s2{border-right: none;background-color:#ffffff;text-align:left;color:#000000;font-family:'Arial';font-size:10pt;vertical-align:bottom;white-space:nowrap;direction:ltr;padding:2px 3px 2px 3px;}</style><div class="ritz grid-container" dir="ltr"><table class="waffle" cellspacing="0" cellpadding="0"><thead><tr><th class="row-header freezebar-origin-ltr"></th><th id="929242422C0" style="width:1544px;" class="column-headers-background">A</th></tr></thead><tbody><tr style="height: 20px"><th id="929242422R0" style="height: 20px;" class="row-headers-background"><div class="row-header-wrapper" style="line-height: 20px">1</div></th><td class="s0" dir="ltr">PEM Encryption</td></tr><tr style="height: 20px"><th id="929242422R1" style="height: 20px;" class="row-headers-background"><div class="row-header-wrapper" style="line-height: 20px">2</div></th><td class="s1" dir="ltr">PEM is a risky format because sensitivity and security aren&#39;t guaranteed and can be complex to verify.</td></tr><tr style="height: 20px"><th id="929242422R2" style="height: 20px;" class="row-headers-background"><div class="row-header-wrapper" style="line-height: 20px">3</div></th><td class="s1" dir="ltr">A PEM is SENSITIVE if it contains a private key.</td></tr><tr style="height: 20px"><th id="929242422R3" style="height: 20px;" class="row-headers-background"><div class="row-header-wrapper" style="line-height: 20px">4</div></th><td class="s1" dir="ltr">A PEM is SECURE only if it is encrypted and requires a password/passphrase to decrypt any and all private keys.</td></tr><tr style="height: 20px"><th id="929242422R4" style="height: 20px;" class="row-headers-background"><div class="row-header-wrapper" style="line-height: 20px">5</div></th><td class="s2 softmerge" dir="ltr"><div class="softmerge-inner" style="width:1631px;left:-1px">There are a often situations where you will need a SENSITIVE key stored INSECURE for use by an application that does not accept a passphrase; these should be decrypted only where needed, and not stored unencrypted on shared hardware (S3, NFS, etc.)</div></td></tr><tr style="height: 20px"><th id="929242422R5" style="height: 20px;" class="row-headers-background"><div class="row-header-wrapper" style="line-height: 20px">6</div></th><td class="s1" dir="ltr"></td></tr><tr style="height: 20px"><th id="929242422R6" style="height: 20px;" class="row-headers-background"><div class="row-header-wrapper" style="line-height: 20px">7</div></th><td class="s0" dir="ltr">To make a SECURE PEM:</td></tr><tr style="height: 20px"><th id="929242422R7" style="height: 20px;" class="row-headers-background"><div class="row-header-wrapper" style="line-height: 20px">8</div></th><td class="s1" dir="ltr">- Use the open SSL commands on the next tab</td></tr><tr style="height: 20px"><th id="929242422R8" style="height: 20px;" class="row-headers-background"><div class="row-header-wrapper" style="line-height: 20px">9</div></th><td class="s1" dir="ltr">- Make sure &#39;-nodes&#39; is<span style="font-weight:bold;"> not specified</span> on an openssl pkcs12 export </td></tr><tr style="height: 20px"><th id="929242422R9" style="height: 20px;" class="row-headers-background"><div class="row-header-wrapper" style="line-height: 20px">10</div></th><td class="s1" dir="ltr">- Make sure one of the valid encryption modes from the list below are in the command (-aes256 or -camellia256 recommended)</td></tr><tr style="height: 20px"><th id="929242422R10" style="height: 20px;" class="row-headers-background"><div class="row-header-wrapper" style="line-height: 20px">11</div></th><td></td></tr><tr style="height: 20px"><th id="929242422R11" style="height: 20px;" class="row-headers-background"><div class="row-header-wrapper" style="line-height: 20px">12</div></th><td class="s0" dir="ltr">To make an INSECURE PEM:</td></tr><tr style="height: 20px"><th id="929242422R12" style="height: 20px;" class="row-headers-background"><div class="row-header-wrapper" style="line-height: 20px">13</div></th><td class="s1" dir="ltr">- Use the open SSL commands on the next tab</td></tr><tr style="height: 20px"><th id="929242422R13" style="height: 20px;" class="row-headers-background"><div class="row-header-wrapper" style="line-height: 20px">14</div></th><td class="s1" dir="ltr">- Ensure that you are working with a non-SENSITIVE key - ie, a public key, a limited-lifespan decrypted copy of a private key, or a single-use key.</td></tr><tr style="height: 20px"><th id="929242422R14" style="height: 20px;" class="row-headers-background"><div class="row-header-wrapper" style="line-height: 20px">15</div></th><td class="s1" dir="ltr">- Add &#39;-nodes&#39; to the command to skip the encryption step in an export or generate operation</td></tr><tr style="height: 20px"><th id="929242422R15" style="height: 20px;" class="row-headers-background"><div class="row-header-wrapper" style="line-height: 20px">16</div></th><td class="s1" dir="ltr">- Make sure none of the valid encryption modes from the list below are in the command</td></tr><tr style="height: 20px"><th id="929242422R16" style="height: 20px;" class="row-headers-background"><div class="row-header-wrapper" style="line-height: 20px">17</div></th><td></td></tr><tr style="height: 20px"><th id="929242422R17" style="height: 20px;" class="row-headers-background"><div class="row-header-wrapper" style="line-height: 20px">18</div></th><td class="s0" dir="ltr">OpenSSL Encryption Flags</td></tr><tr style="height: 20px"><th id="929242422R18" style="height: 20px;" class="row-headers-background"><div class="row-header-wrapper" style="line-height: 20px">19</div></th><td class="s1" dir="ltr">-nodes: Do not encrypt output. Only required on exports from other formats (&#39;openssl pkcs12) or generation (&#39;openssl req&#39;) <span style="font-weight:bold;">(completely insecure!)</span></td></tr><tr style="height: 20px"><th id="929242422R19" style="height: 20px;" class="row-headers-background"><div class="row-header-wrapper" style="line-height: 20px">20</div></th><td class="s1" dir="ltr">-des: Usse DES encryption <span style="font-weight:bold;">(insecure)</span></td></tr><tr style="height: 20px"><th id="929242422R20" style="height: 20px;" class="row-headers-background"><div class="row-header-wrapper" style="line-height: 20px">21</div></th><td class="s1" dir="ltr">-des3: Use Triple DES encryption (default on &#39;openssl pkcs12&#39; export, but must be supplied in a &#39;openssl rsa&#39; operation) <span style="font-weight:bold;">(potentially insecure)</span></td></tr><tr style="height: 20px"><th id="929242422R21" style="height: 20px;" class="row-headers-background"><div class="row-header-wrapper" style="line-height: 20px">22</div></th><td class="s1" dir="ltr">-idea: Use IDEA encryption <span style="font-weight:bold;">(insecure)</span></td></tr><tr style="height: 20px"><th id="929242422R22" style="height: 20px;" class="row-headers-background"><div class="row-header-wrapper" style="line-height: 20px">23</div></th><td class="s1" dir="ltr">-seed: Use SEED encryption <span style="font-weight:bold;">(not recommended unless in Korea due to low interoperability)</span></td></tr><tr style="height: 20px"><th id="929242422R23" style="height: 20px;" class="row-headers-background"><div class="row-header-wrapper" style="line-height: 20px">24</div></th><td class="s1" dir="ltr">-aes128, -aes192, -aes256: Use CBC AES encryption with the given key strength <span style="font-weight:bold;">(aes256 recommended)</span></td></tr><tr style="height: 20px"><th id="929242422R24" style="height: 20px;" class="row-headers-background"><div class="row-header-wrapper" style="line-height: 20px">25</div></th><td class="s1" dir="ltr">-camellia128, -camellia192, -camellia256: Use CBC Camellia encryption with the given key strength <span style="font-weight:bold;">(camellia256 recommended)</span></td></tr><tr style="height: 20px"><th id="929242422R25" style="height: 20px;" class="row-headers-background"><div class="row-header-wrapper" style="line-height: 20px">26</div></th><td></td></tr><tr style="height: 20px"><th id="929242422R26" style="height: 20px;" class="row-headers-background"><div class="row-header-wrapper" style="line-height: 20px">27</div></th><td class="s0" dir="ltr">To examine a PEM for SENSITIVITY and SECURITY:</td></tr><tr style="height: 20px"><th id="929242422R27" style="height: 20px;" class="row-headers-background"><div class="row-header-wrapper" style="line-height: 20px">28</div></th><td class="s1" dir="ltr">- Use a text editor to isolate the individual certs and keys within a PEM <br>(ie, save each as a new file - recommend using name.pem for certs and number.key for keys until matches are verified)</td></tr><tr style="height: 20px"><th id="929242422R28" style="height: 20px;" class="row-headers-background"><div class="row-header-wrapper" style="line-height: 20px">29</div></th><td class="s1" dir="ltr">- If anyÂ PRIVATE KEYs are present, the PEM is SENSITIVE; if any PUBLIC KEYs are present, they should be verified</td></tr><tr style="height: 20px"><th id="929242422R29" style="height: 20px;" class="row-headers-background"><div class="row-header-wrapper" style="line-height: 20px">30</div></th><td class="s1" dir="ltr">- If you are not asked for a password for each PRIVATE key, it&#39;s likely that the PEM is INSECURE</td></tr><tr style="height: 20px"><th id="929242422R30" style="height: 20px;" class="row-headers-background"><div class="row-header-wrapper" style="line-height: 20px">31</div></th><td class="s1" dir="ltr">- Correlation (matching keys and certs) is done via hashing - see hashing and correlation on the next tab</td></tr><tr style="height: 20px"><th id="929242422R31" style="height: 20px;" class="row-headers-background"><div class="row-header-wrapper" style="line-height: 20px">32</div></th><td class="s1" dir="ltr">- The bag attributes in a multi-object PEM can be used to help correlate but are NOT a guarantee - these sections are not secured!</td></tr></tbody></table></div>