<meta http-equiv="Content-Type" content="text/html; charset=utf-8"><link type="text/css" rel="stylesheet" href="resources/sheet.css" >
<style type="text/css">.ritz .waffle a { color: inherit; }.ritz .waffle .s0{background-color:#ffffff;text-align:left;font-weight:bold;color:#000000;font-family:'Arial';font-size:10pt;vertical-align:bottom;white-space:nowrap;direction:ltr;padding:2px 3px 2px 3px;}.ritz .waffle .s1{background-color:#ffffff;text-align:left;color:#000000;font-family:'Arial';font-size:10pt;vertical-align:middle;white-space:nowrap;direction:ltr;padding:2px 3px 2px 3px;}.ritz .waffle .s2{border-right: none;background-color:#ffffff;text-align:left;color:#000000;font-family:'Arial';font-size:10pt;vertical-align:middle;white-space:nowrap;direction:ltr;padding:2px 3px 2px 3px;}.ritz .waffle .s3{border-right: none;background-color:#ffffff;text-align:left;color:#000000;font-family:'Arial';font-size:10pt;vertical-align:bottom;white-space:nowrap;direction:ltr;padding:2px 3px 2px 3px;}</style><div class="ritz grid-container" dir="ltr"><table class="waffle" cellspacing="0" cellpadding="0"><thead><tr><th class="row-header freezebar-origin-ltr"></th><th id="298690898C0" style="width:81px;" class="column-headers-background">A</th><th id="298690898C1" style="width:502px;" class="column-headers-background">B</th><th id="298690898C2" style="width:362px;" class="column-headers-background">C</th><th id="298690898C3" style="width:924px;" class="column-headers-background">D</th></tr></thead><tbody><tr style="height: 20px"><th id="298690898R0" style="height: 20px;" class="row-headers-background"><div class="row-header-wrapper" style="line-height: 20px">1</div></th><td class="s0" dir="ltr">App</td><td class="s0" dir="ltr">Error</td><td class="s0" dir="ltr">What does it mean?</td><td class="s0" dir="ltr">How to address?</td></tr><tr style="height: 20px"><th id="298690898R1" style="height: 20px;" class="row-headers-background"><div class="row-header-wrapper" style="line-height: 20px">2</div></th><td class="s1" dir="ltr">Java</td><td class="s1" dir="ltr">javax.net.ssl.SSLHandshakeException: Received fatal alert: bad_certificate</td><td class="s1 softmerge" dir="ltr"><div class="softmerge-inner" style="width:359px;left:-1px">The server has rejected your cert for 2-way PKI authentication</div></td><td class="s2 softmerge" dir="ltr"><div class="softmerge-inner" style="width:2755px;left:-1px">Run the following commands to get info:<br>Server CA list: <span style="font-family:Consolas,Arial;">openssl s_client -connect remoteserver:443</span><br>                     (Look for &quot;Acceptible cliend certificate CA names&quot;)<br>Client Cert CA (PEM w/chain): <span style="font-family:Consolas,Arial;">openssl x509 -in my.pem -text</span><br>                     (Look for &quot;Issuer&quot;)<br>Then check:<br>1) Ensure that the server accepts a cert signed by your cert&#39;s CA<br>2) Ensure that your cert is within the validity dates<br>3) Ensure that reverse DNS matches your cert&#39;s CN</div></td></tr><tr style="height: 20px"><th id="298690898R2" style="height: 20px;" class="row-headers-background"><div class="row-header-wrapper" style="line-height: 20px">3</div></th><td class="s1" dir="ltr">Java</td><td class="s1 softmerge" dir="ltr"><div class="softmerge-inner" style="width:499px;left:-1px">javax.net.ssl.SSLHandshakeException: sun.security.validator.ValidatorException: <br>PKIX path building failed: sun.security.provider.certpath.SunCertPathBuilderException:<br>unable to find valid certification path to requested target</div></td><td class="s1" dir="ltr">Your client cannot verify the server&#39;s certificate.</td><td class="s3 softmerge" dir="ltr"><div class="softmerge-inner" style="width:5367px;left:-1px">Disable certificate verification features (not recommended!)<br>OR<br>1) Find the truststore for your application and make sure it&#39;s loaded.<br>This varies based on the application, but often involves the JVM setting javax.net.ssl.truststore - look in config files or use jvisualvm.<br>This will be a JKS or P12 store.<br>2) Pull the cert from the server<br><span style="font-family:Consolas,Arial;">openssl s_client -connect </span><span style="font-family:Consolas,Arial;font-weight:bold;">remoteserver:443</span><span style="font-family:Consolas,Arial;"> 2&gt;&amp;1 | sed -ne &#39;/-BEGIN CERTIFICATE-/,/-END CERTIFICATE-/p&#39; &gt; </span><span style="font-family:Consolas,Arial;font-weight:bold;">server_cert.pem</span><br>3) Check the dates<br><span style="font-family:Consolas,Arial;">openssl x509 -noout -in </span><span style="font-family:Consolas,Arial;font-weight:bold;">server_cert.pem</span><span style="font-family:Consolas,Arial;"> -subject -dates</span><br>4) Check the subject <br><span style="font-family:Consolas,Arial;">openssl x509 -noout -in </span><span style="font-family:Consolas,Arial;font-weight:bold;">server_cert.pem</span><span style="font-family:Consolas,Arial;"> -subject</span><br>vs.<br><span style="font-family:Consolas,Arial;">nslookup </span><span style="font-family:Consolas,Arial;font-weight:bold;">remoteserver<br></span><span style="font-family:Consolas,Arial;">nslookup </span><span style="font-family:Consolas,Arial;font-weight:bold;">ip_addr_from_last_command</span><br>5) Check that the issuer is in your truststore<br><span style="font-family:Consolas,Arial;">openssl x509 -noout -in </span><span style="font-family:Consolas,Arial;font-weight:bold;">server_cert.pem</span><span style="font-family:Consolas,Arial;"> -issuer<br></span>vs.<br><span style="font-family:Consolas,Arial;">keytool -list -v -keystore </span><span style="font-family:Consolas,Arial;font-weight:bold;">truststore.p12</span><span style="font-family:Consolas,Arial;"> | grep &quot;</span><span style="font-family:Consolas,Arial;font-weight:bold;">CN OF THE ISSUER</span><span style="font-family:Consolas,Arial;">&quot;</span></div></td></tr></tbody></table></div>